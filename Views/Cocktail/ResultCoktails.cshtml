@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model IEnumerable<CocktailExercise.Models.CocktailModel>

@{
    ViewData["Title"] = "Cocktail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!doctype html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-unobtrusive/3.2.6/jquery.unobtrusive-ajax.js"></script>

</head>

<body>
    <style type="text/css">
        .like-lable {
            background: rgba(0, 0, 0, 0);
            border: none;
        }
    </style>

    <div class="text-center">
        <h1 class="display-4">@Model.Count() - Resultados</h1>
    </div>

    <div class="row row-cols-1 row-cols-md-3 g-4">
        @foreach (var item in Model)
        {
            <form asp-action="AddFavorite" asp-controller="Cocktail"
                  data-ajax="true" data-ajax-method="POST"
                  data-ajax-failure="OnFailure"
                  data-ajax-success="OnSuccess">
                <div class="card" style="width: 35rem;">
                    <img src="@item.strDrinkThumb" class="card-img-top" alt="@item.strDrink">
                    <div class="card-body">
                        <input type="text" asp-for=@item.strDrink class="like-lable" readonly="readonly" style="width: 30rem;" />
                        <input type="text" asp-for=@item.strAlcoholic class="like-lable" readonly="readonly" style="width: 30rem;" />
                        <input type="text" asp-for=@item.strIngredients class="like-lable" readonly="readonly" style="width: 30rem;" />
                        <input type="text" asp-for=@item.idDrink class="like-lable" readonly="readonly" hidden="hidden" />
                        <input type="text" asp-for=@item.strDrinkThumb class="like-lable" readonly="readonly" hidden="hidden" />
                        <input type="submit" value="Agregar a Favorito" class="btn btn-info" />
                    </div>
                </div>
            </form>
        }
    </div>

    <script type="text/javascript">

        function OnFailure(response) {
            alert("Ocurrió un error al guardar en Favoritos");
        }

        function OnSuccess(response) {
            if (response) {
                alert("Se agregó correctamente a Favoritos");
            } else {
                alert("Ocurrió un error al guardar en Favoritos");
            }
        }
    </script>
</body>
</html>
